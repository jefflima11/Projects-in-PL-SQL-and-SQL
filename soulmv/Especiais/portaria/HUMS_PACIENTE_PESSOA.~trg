-- Created on 12/06/2024 by JEFFERSON LIMA 

CREATE OR REPLACE TRIGGER TRG_PACIENTE_PESSOA_HUMS
AFTER INSERT
ON paciente
FOR EACH ROW
BEGIN
  INSERT INTO DBAMV.PT_PESSOA (
    CD_PESSOA,
    NM_NOME,
    DOC_IDENT_ID,
    NR_DOCUMENTO,
    TELEFONE,
    NM_SOCIAL,
    SN_UTILIZA_NOME_SOCIAL,
    SN_VISITANTE_RESTRITO
  )
  VALUES (
    (SELECT MAX(CD_PESSOA) FROM DBAMV.PT_PESSOA) + 1,
    :NEW.NM_PACIENTE,
    1,
    :NEW.NR_CPF,
    :NEW.NR_CELULAR,
    :NEW.NM_SOCIAL_PACIENTE,
    :NEW.SN_UTILIZA_NOME_SOCIAL,
    'N'
  );
END;
/
